import pytest

from day10_monitoring_station import (
    Coordinate,
    asteroids_in_sight,
    get_asteroids,
    parse_map,
)

SAMPLE1 = """.#..#
.....
#####
....#
...##"""

SAMPLE2 = """......#.#.
#..#.#....
..#######.
.#.#.###..
.#..#.....
..#....#.#
#..#....#.
.##.#..###
##...#..#.
.#....####"""

SAMPLE3 = """#.#...#.#.
.###....#.
.#....#...
##.#.#.#.#
....#.#.#.
.##..###.#
..#...##..
..##....##
......#...
.####.###."""

SAMPLE4 = """.#..#..###
####.###.#
....###.#.
..###.##.#
##.##.#.#.
....###..#
..#.#..#.#
#..#.#.###
.##...##.#
.....#.#.."""

SAMPLE5 = """.#..##.###...#######
##.############..##.
.#.######.########.#
.###.#######.####.#.
#####.##.#.##.###.##
..#####..#.#########
####################
#.####....###.#.#.##
##.#################
#####.##.###..####..
..######..##.#######
####.##.####...##..#
.#####..#.######.###
##...#.##########...
#.##########.#######
.####.#.###.###.#.##
....##.##.###..#####
.#.#.###########.###
#.#.#.#####.####.###
###.##.####.##.#..##"""


@pytest.mark.parametrize(
    "data, prime_location",
    [
        (SAMPLE1, (8, Coordinate(3, 4))),
        (SAMPLE2, (33, Coordinate(5, 8))),
        (SAMPLE3, (35, Coordinate(1, 2))),
        (SAMPLE4, (41, Coordinate(6, 3))),
        (SAMPLE5, (210, Coordinate(11, 13))),
    ],
)
def test_sample1(data, prime_location):
    asteroids = get_asteroids(parse_map(data))
    best = max(((asteroids_in_sight(asteroids, coord), coord)) for coord in asteroids)
    assert best == prime_location
